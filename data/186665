/*
USER_ID: bupt#100136137030637
PROBLEM: 999
SUBMISSION_TIME: 2016-03-25 15:19:37
*/
#include <iostream>
#include <fstream>
#include <string>
#include <cstring>
#include <cmath>
using namespace std;
string getSub(string str, int a, int b)
{
    string temp="";
    for(int i = a;i <= b;i++)
        temp += str[i];
    return temp;
}
int main(void)
{
//    freopen("1.txt", "r", stdin);
//    freopen("2.txt", "w", stdout);
    string str;
    string t;

    cin>>str;
    int n;
    cin>>n;
    while(n--)
    {
        string temp;
        cin>>temp;
        if(temp == "COPY")
        {
            int a, b;
            cin>>a>>b;
            t = getSub(str, a, b);
            //cout<<"#COPY s= "<<str<<"t ="<<t<<endl;
        }
        if(temp == "CUT")
        {
            int a, b;
            cin>>a>>b;
            t = getSub(str, a, b);
            string tmp = "";
            for(int i = 0;i < str.length();i++)
            {
                if(a <= i && i <= b)
                    continue;
                else
                    tmp += str[i];
            }
            str = tmp;
            //cout<<"#CUT str="<<str<<" t="<<t<<endl;
        }
        if(temp == "PASTE")
        {
            int a;
            cin>>a;
            string tmp = "";
            int i;
            for(i = 0;i <= a;i++)
                tmp += str[i];
            tmp += t;
            for(;i < str.length();i++)
                tmp += str[i];
            str = tmp;
            //cout<<"#PASTE s = "<<str<<" t="<<t<<endl;
        }
        cout<<str<<endl;

    }
    return 0;
}
