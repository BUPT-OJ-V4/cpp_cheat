/*
USER_ID: bupt#100136251030952
PROBLEM: 999
SUBMISSION_TIME: 2016-03-25 15:55:53
*/

#include <iostream>
#include <stdio.h>
#include <string.h>

using namespace std;

char buf[200];
char t[200];
char operate[50];

int main(int argc, char *argv[])
{
    int m;
    for ( int i = 0; i < 200; i++) {
        t[i] = -1;
    }
    scanf("%s", buf);
    scanf("%d", &m);
    while (m--) {
          scanf("%s", operate);
          if (strcmp(operate, "COPY") == 0) {
             int a, b;
             scanf("%d %d", &a, &b);
             int i;
             for (i = a; i <= b; i++) {
                 t[i-a] = buf[i];
             }
             t[i-a] = 0;
             printf("%s\n", buf);
          }
          else if (strcmp(operate, "CUT") == 0) {
             int a, b;
             scanf("%d %d", &a, &b);
             int i;
             for (i = a; i <= b; i++) {
                 t[i-a] = buf[i];
             }
             t[i-a] = 0;
             int j;
             int len = strlen(buf) - (b - a) - 2;
             int len2 = b - a;
             for (j = a; j <= len; j++) {
                 buf[j] = buf[j + len2 + 1];
             }

             buf[j] = 0;
             printf("%s\n", buf);

          }
          else if (strcmp(operate, "PASTE") == 0) {
             int a;
             scanf("%d", &a);
             buf[strlen(t) + strlen(buf)] = 0;
             int i;
             for (i = strlen(t) + strlen(buf) - 1; i >= a + strlen(t) + 1; i--) {
                 buf[i] = buf[i- strlen(t)];
             }
             int j;
             for (j = a + 1; j <= a + strlen(t); j++) {
                 buf[j] = t[j - a -1];
             }
             printf("%s\n", buf);
          }
          
    }
}
