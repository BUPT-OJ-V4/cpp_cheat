/*
USER_ID: bupt#100136226030895
PROBLEM: 999
SUBMISSION_TIME: 2016-03-25 15:02:59
*/
#include <string>
#include <iostream>
#include <algorithm>

using namespace std;

int main()
{
    string str;
    cin >> str;
    int ops;
    cin >> ops;
    string clip;

    while (ops--)
    {
        string op;
        cin >> op;
        if (op == "CUT")
        {
            int a, b;
            cin >> a >> b;
            clip = str.substr(a, b - a + 1);
            str.erase(str.begin() + a, str.begin() + b + 1);
        }
        else if (op == "COPY")
        {
            int a, b;
            cin >> a >> b;
            clip = str.substr(a, b - a + 1);
        }
        else
        {
            int p;
            cin >> p;
            str.insert(str.begin() + p + 1, clip.begin(), clip.end());
        }
        cout << str << endl;
    }
    return 0;
}
