/*
USER_ID: bupt#100136244030926
PROBLEM: 999
SUBMISSION_TIME: 2016-03-25 14:55:29
*/
#include <iostream>
#include <stdio.h>
#include <stdlib.h>
#include <vector>
#include <string.h>
#include <string>
#include <algorithm>
#include <queue>
#include <numeric>

using namespace std;

#define MAX_N 55
string str;
string kk;
char tmp[1024];

int main()
{
    // freopen("in1.txt", "r", stdin);

    int T;
    cin >> str;
    // scanf("%s", str);
    scanf("%d", &T);
    getchar();

    while(T--)
    {
        int a, b;
        gets(tmp);
        if(tmp[1] == 'U') // cut
        {
            sscanf(tmp, "CUT %d %d", &a, &b);
            kk = str.substr(a, b-a+1);
            str.erase(str.begin()+a, str.begin()+b+1);
            cout << str << endl;
        }
        else if(tmp[1] == 'A') // PASTE
        {
            sscanf(tmp, "PASTE %d", &a);
            str.insert(str.begin()+a+1, kk.begin(), kk.end());
            cout << str << endl;
            // cout << a << endl;
        }
        else if(tmp[1] == 'O') // COPY
        {
            sscanf(tmp, "COPY %d %d", &a, &b);
            kk = str.substr(a, b-a+1);
            cout << str << endl;
        }
    }
    return 0;
}
