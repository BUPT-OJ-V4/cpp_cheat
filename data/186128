/*
USER_ID: bupt#100136136030552
PROBLEM: 999
SUBMISSION_TIME: 2016-03-25 14:58:23
*/
#include <stdio.h>
#include <string.h>
char base[1000];
char cut_panel[1000];
int cut_panel_length = 0;
int main(){
    scanf("%s", base);
    int m;
    scanf("%d", &m);
    while(m--){
        char command[20];
        scanf("%s", command);
        if(command[0] == 'C' && command[1] == 'O'){
            int s, e;
            scanf("%d%d", &s, &e);
            for(int c_itr = 0, b_itr = s; b_itr <= e; cut_panel[c_itr++] = base[b_itr++]);
            cut_panel[e-s+1] = 0;
            printf("%s\n", base); //check
        }
        else if(command[0] == 'C' && command[1] == 'U'){
            int s, e;
            scanf("%d%d", &s, &e);
            for(int c_itr = 0, b_itr = s; b_itr <= e; cut_panel[c_itr++] = base[b_itr++]);
            cut_panel[e-s+1] = 0;
            int current_base_length = strlen(base);

            for(int mov_ptr = e+1;base[mov_ptr];mov_ptr++) base[mov_ptr - e + s - 1] = base[mov_ptr];
            base[current_base_length - e + s - 1] = 0;
            printf("%s\n", base); //check
        }
        else{
            int s;
            scanf("%d", &s);
            int panel_length = strlen(cut_panel);
            int current_base_length = strlen(base);
            base[current_base_length + panel_length + 1] = 0;
            for(int mov_ptr = current_base_length + panel_length; mov_ptr > s + panel_length; base[mov_ptr--] = base[mov_ptr - panel_length]);
            for(int cpy_ptr = 0; cpy_ptr < panel_length; base[s+1+cpy_ptr] = cut_panel[cpy_ptr++]);
            printf("%s\n", base); //check
        }
    }
    return 0;
}
