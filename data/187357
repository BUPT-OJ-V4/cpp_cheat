/*
USER_ID: bupt#100136111311217
PROBLEM: 999
SUBMISSION_TIME: 2016-03-25 15:48:12
*/
#include <stdio.h>
#include <string.h>
char s[300];
char t[300];
int main()
{
    int i, j, k, n;
    gets(s);
    scanf("%d", &n);
    int v;
    for(v=0; v<n; v++)
    {
        fflush(stdin);
        char op[30];
        scanf("%s", op);
        if(strcmp(op, "CUT") == 0)
        {
            int l, r;
            scanf("%d %d", &l, &r);
            int len = 0;
            for(i=l; i<=r; i++)
            {
                t[len++] = s[i];
            }
            t[len] = '\0';
            //puts(t);
            char temp[300];
            strncpy(temp, s, l);
            temp[l] = '\0';
            len = strlen(temp);
            for(i=r+1; i<strlen(s); i++)
            {
                temp[len++] = s[i];
            }
            temp[len] = '\0';
            strcpy(s, temp);
            printf("%s\n", s);
        }
        else if(strcmp(op, "COPY") == 0)
        {
            int l, r;
            scanf("%d %d", &l, &r);
            int len = 0;
            for(i=l; i<=r; i++)
            {
                t[len++] = s[i];
            }
            t[len] = '\0';
            printf("%s\n", s);
        }
        else if(strcmp(op, "PASTE") == 0)
        {
            int p;
            scanf("%d", &p);
            char temp[300];
            strncpy(temp, s, p+1);
            temp[p+1] = '\0';
            //puts(temp);
            int i, j;
            strcat(temp, t);
            //puts(temp);
            int len = strlen(temp);
            for(i=p+1; i<strlen(s); i++)
                temp[len++] = s[i];
            temp[len] = '\0';
            strcpy(s, temp);
            printf("%s\n", s);
        }
    }
    return 0;

}
