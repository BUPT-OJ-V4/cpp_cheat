/*
USER_ID: bupt#100136111311204
PROBLEM: 999
SUBMISSION_TIME: 2016-03-25 15:35:28
*/
#include <iostream>
#include <string>

using namespace std;

int main() {
    string s;
    string t;

    cin >> s;

    int N;
    cin >> N;

    while (N--) {
        string op;
        cin >> op;

        if (op == string("COPY")) {
            int a, b;
            cin >> a >> b;
            t = s.substr(a, b - a + 1);
        }

        if (op == string("CUT")) {
            int a, b;
            cin >> a >> b;
            t = s.substr(a, b - a + 1);
            string temp;
            temp.append(s.substr(0, a));
            temp.append(s.substr(b + 1));
            s = temp;
        }

        if (op == string("PASTE")) {
            int a;
            cin >> a;
            string temp;
            temp.append(s.substr(0, a + 1));
            temp.append(t);
            temp.append(s.substr(a + 1));
            s = temp;
        }

        cout << s << endl;
    }
}
