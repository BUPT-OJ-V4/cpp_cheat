/*
USER_ID: bupt#100136111311041
PROBLEM: 999
SUBMISSION_TIME: 2016-03-25 15:28:28
*/
#include<iostream>
#include<algorithm>
#include<string.h>
#include<string>
using namespace std;
void cut(string &a,string &b,int i,int j){
     int m,n;
     string l1,l2;
     for(m=0;m<i;m++)
     l1=l1+a[m];
     for(n=j+1;n<a.size();n++)
     l2=l2+a[n];
     b.clear();
     for(m=i;m<=j;m++)
     b=b+a[m];
     a=l1+l2;
     cout <<a <<endl;
     }
     void copy(string &a,string &b,int i,int j){
          b.clear();
          int m;
          for(m=i;m<=j;m++)
          b=b+a[m];
          
          cout <<a<<endl;
     }
     void paste(string &a,string &b,int i){
          string l,k;
          int m,n;
          for(m=i+1;m<a.size();m++)
          l=l+a[m];
          for(n=0;n<=i;n++)
          k=k+a[n];
          a=k+b+l;        
          cout << a<<endl;
     }
     
int main(){
    string a,b;
    int num,i,j,k;
    char op[10];
    cin >> a;
    cin>>num;
    for(k=0;k<num;k++){
                     cin>> op;
                     if(strcmp(op,"CUT")==0){
                         cin>>i>>j;
                      cut(a,b,i,j);
                      }
                      else if(strcmp(op,"COPY")==0){
                           cin>>i>>j;
                      copy(a,b,i,j);
                      }
                      else{
                           cin >>i;
                      paste(a,b,i);
                      }
}

return 0;
}
