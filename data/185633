/*
USER_ID: bupt#100136188030851
PROBLEM: 999
SUBMISSION_TIME: 2016-03-25 14:37:40
*/
#include<cstdio>
#include<iostream>
#include<cstring>
using namespace std;
char op[1111];
string s, t;
int main() {
    //freopen("a.txt", "r", stdin);
    cin >> s;
    int m;
    scanf("%d", &m);
    while(m--) {
        scanf("%s", op);
        string tmp;
        if(op[1] == 'A') {
                 int pos;
                 scanf("%d", &pos);
                 tmp = s.substr(0, pos+1) + t + s.substr(pos+1);
                 s = tmp;
        } else if(op[1] == 'U') {
               int l, r;
               scanf("%d%d", &l, &r);
               t = s.substr(l, r-l+1);
               s = s.substr(0, l) + s.substr(r+1);
        } else {
               int l, r;
               scanf("%d%d", &l, &r);
               t = s.substr(l, r-l+1);
        }
        cout << s << "\n";
        //cout << "----" << t << endl;
    }
    return 0;
}
