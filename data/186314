/*
USER_ID: bupt#100136128030532
PROBLEM: 999
SUBMISSION_TIME: 2016-03-25 15:05:37
*/
#include <stdio.h>
#include <string.h>
int main(){
    int tlength=0;
    char str[201];
    char t[201]={'\0'};
    scanf("%s",str);
    int slength=strlen(str);
    int n;
    scanf("%d",&n);
    for(int i=0;i<n;i++){
        char mingl[20];
        scanf("%s",mingl);
        if(mingl[0]=='C'&&mingl[1]=='O'){
            int a,b;
            scanf("%d%d",&a,&b);
            tlength=0;
            for(int i=a;i<=b;i++){
                t[tlength++]=str[i];
            }
            t[tlength]='\0';
            //puts(t);
            puts(str);
        }else if(mingl[0]=='C'&&mingl[1]=='U'){
            int a,b;
            scanf("%d%d",&a,&b);
            tlength=0;
            for(int i=a;i<=b;i++){
                t[tlength++]=str[i];
            }
            t[tlength]='\0';
            int c=b-a+1;
            for(int i=b+1;i<slength;i++){
                str[i-c]=str[i];    
            }
            slength=slength-c;
            str[slength]='\0';
            puts(str);
            
        }else if(mingl[0]=='P'){
            int a;
            scanf("%d",&a);
            for(int i=slength-1;i>a;i--){
                str[i+tlength]=str[i];    
            }
            for(int i=a+1,j=0;j<tlength;i++,j++){
                str[i]=t[j];    
            }
            slength=slength+tlength;
            str[slength]='\0';
            puts(str);
        }
    }
    //while(1);//注意删除 
    return 0;    
}
