/*
USER_ID: bupt#100136111030483
PROBLEM: 999
SUBMISSION_TIME: 2016-03-25 15:39:15
*/
#include <iostream>
#include <sstream>
using namespace std;

int main()
{
    string str;
    cin>>str;
    int n=0;
    cin>>n;
    cin.ignore();
    string ban;
    while(n--)
    {
        string op;

        getline(cin,op);
        istringstream is(op);
        string pp;
        int a=0,b=0;
        string tmp1;
        string tmp2;
        switch(op[1])
        {
        case 'U':
            is>>pp>>a>>b;
            ban =str.substr(a,b-a+1);
            str.erase(a,b-a+1);
            break;
        case 'A':
            is>>pp>>a;

            tmp1 =str.substr(0,a+1);
            tmp2 =str.substr(a+1,str.size()-a-1);
            str = tmp1+ban+tmp2;

            break;
        case 'O':
            is>>pp>>a>>b;
            ban=str.substr(a,b-a+1);
            break;
        }

        cout<<str<<endl;
    }

    return 0;
}
