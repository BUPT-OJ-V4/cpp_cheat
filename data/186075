/*
USER_ID: bupt#100136188030850
PROBLEM: 999
SUBMISSION_TIME: 2016-03-25 14:56:21
*/
#include <iostream>
#include <fstream>
#include <string>
using namespace std;
int T,l,r,p;
string s,t;
void cpy(){
    t = s.substr(l,r-l+1);
    cout<<s<<endl;
}
void cut(){
    t = s.substr(l,r-l+1);
    string bar,foo;
    foo = s.substr(0,l);
    bar = s.substr(r+1);
    s = foo+bar;
    cout<<s<<endl;
}
void paste(){
    string foo = s.substr(p+1);
    string bar = s.substr(0,p+1);
    s = bar + t + foo;
    cout<<s<<endl;
}
int main()
{
    //fstream in("sample.txt");
    cin>>s>>T;
    string op;
    for(int time=0;time!=T;++time){
        cin>>op;
        if(op == "COPY"){
            cin>>l>>r;
            cpy();
        } else if(op == "CUT"){
            cin>>l>>r;
            cut();
        } else{
            cin>>p;
            paste();
        }
    }
    return 0;
}
