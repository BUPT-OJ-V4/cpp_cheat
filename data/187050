/*
USER_ID: bupt#100136234030907
PROBLEM: 999
SUBMISSION_TIME: 2016-03-25 15:36:21
*/
#include<stdio.h>
#include<iostream>
#include<string.h>
using namespace std;
int main()
{
   
            
    char s[201];
    char t[201];
    cin>>s;
    int n;
    cin>>n;
    int lent=0;
    int lens=strlen(s);
    while(n--)
    {
          char m[10];
          cin>>m;
          if(m[0]=='C'&&m[1]=='O')
          {
                       int size=0;
                       int l,r;
                       cin>>l>>r;
                       for(int i=l;i<=r;i++)
                       {
                               t[size++]=s[i];
                       }
                        lent=size;
                       for(int i=0;i<lens;i++)
                       {
                               cout<<s[i];
                               }
                               cout<<endl;   
                                 
          } 
          else   if(m[0]=='C'&&m[1]=='U')
          {
                 int size=0;
                 int l,r;
                 char s1[201];
                 cin>>l>>r;
                 for(int i=l;i<=r;i++)
                       {
                               t[size++]=s[i];
                       }
                       lent=size;
                       int size1=0;
                       for(int i=0;i<l;i++)
                       {
                               s1[size1++]=s[i];
                               }
                       for(int i=r+1;i<lens;i++)
                       {
                               s1[size1++]=s[i];
                               }
                               for(int i=0;i<size1;i++)
                               {
                                       s[i]=s1[i];
                                       }
                                       lens=size1;
                                       for(int i=0;i<lens;i++)
                                       {
                                               cout<<s[i];
                                               }
                                               cout<<endl;
                 }
                 else if(m[0]=='P')
                 { 
                      int l;
                      cin>>l;
                      int size=0;
                      char s1[201];
                      for(int i=0;i<=l;i++)
                      {
                              s1[size++]=s[i];
                              
                              }
                              for(int i=0;i<lent;i++)
                              {
                                      s1[size++]=t[i];
                                      
                                      }
                                      for(int i=l+1;i<lens;i++)
                                      {
                                              s1[size++]=s[i];
                                              
                                              }
                                              for(int i=0;i<size;i++)
                                              {
                                                      s[i]=s1[i];
                                                      }
                                                      lens=size;
                                               for(int i=0;i<lens;i++)
                                              {
                                                      cout<<s[i];
                                                      }
                                                      cout<<endl;
                  }
                 
    }
              

}
