/*
USER_ID: bupt#100136010030103
PROBLEM: 999
SUBMISSION_TIME: 2016-03-25 15:45:56
*/
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

char str[300] ="";
char clipboard[300]="";
char buffer[300]="";
void copy();
void cut();
void paste();

char commands[][6] = {"COPY","CUT","PASTE"};
void (*op[])()={copy,cut,paste};

int main(int argc, char *argv[])
{
 	scanf("%s",str);
 	int n;
 	scanf("%d",&n);
 	char cmd[6];
 	for(int i=0;i<n;i++)
 	{
	    scanf("%s",cmd);
	    for(int j=0;j<3;j++){
		    if(strcmp(cmd,commands[j])==0)
			{
		 	    op[j]();
		        break;
			}
		}
		printf(str);
		printf("\n");
	}
	//system("pause");
    return 0;
}

void copy(){
	int l,r;
	scanf("%d %d",&l,&r);
	for(int i=l;i<=r;i++){
	    clipboard[i-l]=str[i];
	}
	clipboard[r-l+1]='\0';
//	printf("clipboard:%s\n",clipboard);
}

void cut(){
    int l,r;
	scanf("%d %d",&l,&r);
	for(int i=l;i<=r;i++){
	    clipboard[i-l]=str[i];
	//    printf("cut:%d %c\n",i,str[i]);
	}
	clipboard[r-l+1]='\0';
	//printf("zhiling:%d\n",r-l+1);
	strcpy(buffer,str+r+1);
	strcpy(str+l,buffer);
	//printf("clipboard:%s\n",clipboard);
}

void paste(){
	 int p;
	 scanf("%d",&p);
	 p++;
	 strcpy(buffer,str+p);
	 strcpy(str+p,clipboard);
	 strcpy(str+p+strlen(clipboard),buffer);
}
